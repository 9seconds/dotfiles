#!/usr/bin/env fish
# vim: set sw=2 sts=2 ts=2

# Show the contents of a script with a given name

set this_script_path $(path resolve $(status --current-filename))
set this_script_name $(path basename $this_script_path)

argparse 'h/help' 'd/debug' -- $argv
or return 1

if set -q _flag_debug
  set fish_trace 1
end

if set -q _flag_help
  or test (count $argv) -ne 1
  echo "Usage: $(basename $this_script_path) [-h/--help] [-d/--debug] ARG"
  echo
  echo "New great script"
  echo
  echo "Options:"
  echo "  -h, --help    Show this help message and exit"
  return 0
end

set fish_trace 1

cp ~/.local/share/mksc_template.fish $argv[1]
chown $USER:$USER $argv[1]
chmod 0755 $argv[1]
$EDITOR $argv[1]
